{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"PIX Payload Generator\", -1 /* HOISTED */);\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"nome\"\n}, \"Nome:\", -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"chavepix\"\n}, \"Chave PIX:\", -1 /* HOISTED */);\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"valor\"\n}, \"Valor:\", -1 /* HOISTED */);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"cidade\"\n}, \"Cidade:\", -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"txtId\"\n}, \"Texto ID:\", -1 /* HOISTED */);\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"h4\", null, \"Payload Completa:\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createElementVNode(\"div\", null, [_hoisted_2, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.nome = $event),\n    id: \"nome\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.nome]])]), _createElementVNode(\"div\", null, [_hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.chavepix = $event),\n    id: \"chavepix\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.chavepix]])]), _createElementVNode(\"div\", null, [_hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.valor = $event),\n    id: \"valor\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.valor]])]), _createElementVNode(\"div\", null, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.cidade = $event),\n    id: \"cidade\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.cidade]])]), _createElementVNode(\"div\", null, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.txtId = $event),\n    id: \"txtId\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.txtId]])]), _createElementVNode(\"button\", {\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.gerarPayload && $options.gerarPayload(...args))\n  }, \"Gerar Payload e QR Code\"), _createElementVNode(\"div\", null, [_ctx.qrcode ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: _ctx.qrcode,\n    alt: \"QR Code PIX\"\n  }, null, 8 /* PROPS */, _hoisted_7)) : _createCommentVNode(\"v-if\", true)]), $data.payloadCompleta ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"pre\", null, _toDisplayString($data.payloadCompleta), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["_createElementVNode","for","_createElementBlock","_hoisted_1","_hoisted_2","type","$data","nome","$event","id","_hoisted_3","chavepix","_hoisted_4","valor","_hoisted_5","cidade","_hoisted_6","txtId","onClick","_cache","args","$options","gerarPayload","_ctx","qrcode","src","alt","payloadCompleta","_hoisted_8","_hoisted_9","_toDisplayString"],"sources":["C:\\Users\\11\\Desktop\\teste-pix.js\\teste-pix.js\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\n  <div>\n    <h3>PIX Payload Generator</h3>\n    <div>\n      <label for=\"nome\">Nome:</label>\n      <input type=\"text\" v-model=\"nome\" id=\"nome\">\n    </div>\n    <div>\n      <label for=\"chavepix\">Chave PIX:</label>\n      <input type=\"text\" v-model=\"chavepix\" id=\"chavepix\">\n    </div>\n    <div>\n      <label for=\"valor\">Valor:</label>\n      <input type=\"text\" v-model=\"valor\" id=\"valor\">\n    </div>\n    <div>\n      <label for=\"cidade\">Cidade:</label>\n      <input type=\"text\" v-model=\"cidade\" id=\"cidade\">\n    </div>\n    <div>\n      <label for=\"txtId\">Texto ID:</label>\n      <input type=\"text\" v-model=\"txtId\" id=\"txtId\">\n    </div>\n    <button @click=\"gerarPayload\">Gerar Payload e QR Code</button>\n    <div>\n      <img v-if=\"qrcode\" :src=\"qrcode\" alt=\"QR Code PIX\">\n    </div>\n    <div v-if=\"payloadCompleta\">\n      <h4>Payload Completa:</h4>\n      <pre>{{ payloadCompleta }}</pre>\n    </div>\n  </div>\n</template>\n\n<script>\n// Importe as bibliotecas necessárias no início do seu script\nimport crc from 'crc';\nimport QRCode from 'qrcode-generator';\n\n// Defina a função gerarQrCode\nfunction gerarQrCode(payload, diretorio) {\n  // Código para gerar o QR Code usando a biblioteca 'qrcode-generator'\n  const typeNumber = 4;\n  const errorCorrectionLevel = 'L';\n  const qr = QRCode(typeNumber, errorCorrectionLevel);\n  qr.addData(payload);\n  qr.make();\n\n  // Salvar o QR Code no diretório especificado\n  const dir = os.path.expanduser(diretorio);\n  const qrCodeDataUrl = qr.createDataURL();\n  const img = new Image();\n  img.src = qrCodeDataUrl;\n  img.onload = () => {\n    const canvas = document.createElement('canvas');\n    canvas.width = qr.getModuleCount() * 10;\n    canvas.height = qr.getModuleCount() * 10;\n    const context = canvas.getContext('2d');\n    context.drawImage(img, 0, 0, canvas.width, canvas.height);\n    canvas.toBlob((blob) => {\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = 'qrcode.png';\n      link.click();\n      URL.revokeObjectURL(url);\n    });\n  };\n}\n\n// Defina a função gerarCrc16 fora do objeto Vue\nfunction gerarCrc16(payload) {\n  // Função para calcular o CRC-16\n  function calcularCrc16(data) {\n    const poly = 0x11021;\n    let crc = 0xFFFF;\n\n    for (let i = 0; i < data.length; i++) {\n      crc ^= (data.charCodeAt(i) << 8);\n\n      for (let j = 0; j < 8; j++) {\n        if (crc & 0x8000) {\n          crc = (crc << 1) ^ poly;\n        } else {\n          crc <<= 1;\n        }\n      }\n    }\n\n    return crc & 0xFFFF;\n  }\n  \n\n  // Calcula o CRC-16\n  const crc16 = calcularCrc16(payload);\n\n  // Formata o código CRC-16 como uma string hexadecimal de 4 caracteres\n  const crc16Code_formatado = crc16.toString(16).toUpperCase().padStart(4, '0');\n\n  // Concatena o código CRC-16 à payload\n  const payload_completa = `${payload}${crc16Code_formatado}`;\n\n  // Chama a função para gerar o QR Code\n  // Certifique-se de que a função gerarQrCode esteja definida e acessível neste escopo.\n  gerarQrCode(payload_completa, this.diretorioQrCode); // Note que usamos \"this\" para acessar propriedades do Vue\n}\n\nexport default {\n  data() {\n  return {\n    // ... outras propriedades do seu componente\n    diretorioQrCode: 'src\\views' // Substitua pelo caminho real desejado\n  };\n},\n  data() {\n    return {\n      nome: '',\n      chavepix: '',\n      valor: '',\n      cidade: '',\n      txtId: '',\n      diretorioQrCode: '',\n      \n      payloadFormat: '000201',\n      merchantCategCode: '52040000',\n      transactionCurrency: '5303986',\n      countryCode: '5802BR',\n      crc16: '6304',\n      payloadCompleta: '' // Define payloadCompleta as a data property\n    };\n  },\n  methods: {\n    gerarPayload() {\n      const valorFloat = parseFloat(this.valor.replace(',', '.')).toFixed(2);\n      this.nome_tam = this.nome.length.toString().padStart(2, '0');\n      this.chavepix_tam = this.chavepix.length.toString().padStart(2, '0');\n      this.valor_tam = this.valor.length.toString().padStart(2, '0');\n      this.cidade_tam = this.cidade.length.toString().padStart(2, '0');\n      this.txtId_tam = this.txtId.length.toString().padStart(2, '0');\n\n      this.merchantAccount_tam = `0014BR.GOV.BCB.PIX01${this.chavepix_tam}${this.chavepix}`;\n      this.transactionAmount_tam = `${this.valor_tam}${parseFloat(this.valor).toFixed(2)}`;\n      this.addDataField_tam = `05${this.txtId_tam}${this.txtId}`;\n\n      this.nome_tam = `59${this.nome_tam}${this.nome}`;\n      this.cidade_tam = `60${this.cidade_tam}${this.cidade}`;\n\n      this.merchantAccount = `26${(14 + this.chavepix.length).toString().padStart(2, '0')}${this.chavepix}`;\n      this.transactionAmount = `54${(2 + valorFloat.length).toString().padStart(2, '0')}${valorFloat}`;\n      this.merchantName = `59${this.nome_tam}`;\n      this.merchantCity = `60${this.cidade_tam}`;\n      this.addDataField = `62${(2 + this.txtId_tam).toString().padStart(2, '0')}${this.addDataField_tam}`;\n\n      const payload = `${this.payloadFormat}${this.merchantAccount}${this.merchantCategCode}${this.transactionCurrency}${this.transactionAmount}${this.countryCode}${this.merchantName}${this.merchantCity}${this.addDataField}${this.crc16}`;\n      this.payloadCompleta = gerarCrc16(payload); // Use a função gerarCrc16 sem \"this\"\n      gerarQrCode(this.payloadCompleta, this.diretorioQrCode);\n    },\n  },\n};\n\n</script>\n"],"mappings":";gCAEIA,mBAAA,CAA8B,YAA1B,uBAAqB;gCAEvBA,mBAAA,CAA+B;EAAxBC,GAAG,EAAC;AAAM,GAAC,OAAK;gCAIvBD,mBAAA,CAAwC;EAAjCC,GAAG,EAAC;AAAU,GAAC,YAAU;gCAIhCD,mBAAA,CAAiC;EAA1BC,GAAG,EAAC;AAAO,GAAC,QAAM;gCAIzBD,mBAAA,CAAmC;EAA5BC,GAAG,EAAC;AAAQ,GAAC,SAAO;gCAI3BD,mBAAA,CAAoC;EAA7BC,GAAG,EAAC;AAAO,GAAC,WAAS;;;;;gCAQ5BD,mBAAA,CAA0B,YAAtB,mBAAiB;;;uBA3BzBE,mBAAA,CA8BM,cA7BJC,UAA8B,EAC9BH,mBAAA,CAGM,cAFJI,UAA+B,E,gBAC/BJ,mBAAA,CAA4C;IAArCK,IAAI,EAAC,MAAM;+DAAUC,KAAA,CAAAC,IAAI,GAAAC,MAAA;IAAEC,EAAE,EAAC;iDAATH,KAAA,CAAAC,IAAI,E,KAElCP,mBAAA,CAGM,cAFJU,UAAwC,E,gBACxCV,mBAAA,CAAoD;IAA7CK,IAAI,EAAC,MAAM;+DAAUC,KAAA,CAAAK,QAAQ,GAAAH,MAAA;IAAEC,EAAE,EAAC;iDAAbH,KAAA,CAAAK,QAAQ,E,KAEtCX,mBAAA,CAGM,cAFJY,UAAiC,E,gBACjCZ,mBAAA,CAA8C;IAAvCK,IAAI,EAAC,MAAM;+DAAUC,KAAA,CAAAO,KAAK,GAAAL,MAAA;IAAEC,EAAE,EAAC;iDAAVH,KAAA,CAAAO,KAAK,E,KAEnCb,mBAAA,CAGM,cAFJc,UAAmC,E,gBACnCd,mBAAA,CAAgD;IAAzCK,IAAI,EAAC,MAAM;+DAAUC,KAAA,CAAAS,MAAM,GAAAP,MAAA;IAAEC,EAAE,EAAC;iDAAXH,KAAA,CAAAS,MAAM,E,KAEpCf,mBAAA,CAGM,cAFJgB,UAAoC,E,gBACpChB,mBAAA,CAA8C;IAAvCK,IAAI,EAAC,MAAM;+DAAUC,KAAA,CAAAW,KAAK,GAAAT,MAAA;IAAEC,EAAE,EAAC;iDAAVH,KAAA,CAAAW,KAAK,E,KAEnCjB,mBAAA,CAA8D;IAArDkB,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,YAAA,IAAAD,QAAA,CAAAC,YAAA,IAAAF,IAAA,CAAY;KAAE,yBAAuB,GACrDpB,mBAAA,CAEM,cADOuB,IAAA,CAAAC,MAAM,I,cAAjBtB,mBAAA,CAAmD;;IAA/BuB,GAAG,EAAEF,IAAA,CAAAC,MAAM;IAAEE,GAAG,EAAC;8EAE5BpB,KAAA,CAAAqB,eAAe,I,cAA1BzB,mBAAA,CAGM,OAAA0B,UAAA,GAFJC,UAA0B,EAC1B7B,mBAAA,CAAgC,aAAA8B,gBAAA,CAAxBxB,KAAA,CAAAqB,eAAe,iB"},"metadata":{},"sourceType":"module","externalDependencies":[]}